{% extends "base.html" %} {% block content %}
<div class="p-4 md:p-6 max-w-5xl mx-auto">
  <div class="flex items-center justify-between mb-4">
    <h1 class="text-xl font-semibold">
      {% if object and object.pk %}Edit Customer / Party{% else %}New Customer /
      Party{% endif %}
    </h1>
    <a href="{% url 'customers_list' %}" class="text-slate-600 hover:underline"
      >‚Üê Back</a
    >
  </div>

  {% if form.non_field_errors %}
  <div
    class="mb-4 rounded-lg border border-rose-200 bg-rose-50/80 text-rose-800 px-3 py-2 text-sm"
  >
    {{ form.non_field_errors }}
  </div>
  {% endif %}

  <form
    method="post"
    class="rounded-2xl border border-slate-200 bg-white p-5 space-y-5"
  >
    {% csrf_token %}
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm mb-1">Type</label>
        {{ form.type }}
        <div class="text-rose-600 text-xs">{{ form.type.errors }}</div>
      </div>
      <div>
        <label class="block text-sm mb-1">Default Business</label>
        {{ form.default_business }}
        <div class="text-rose-600 text-xs">
          {{ form.default_business.errors }}
        </div>
      </div>
      <div class="md:col-span-2">
        <label class="block text-sm mb-1">Display Name</label>
        {{ form.display_name }}
        <div class="text-rose-600 text-xs">{{ form.display_name.errors }}</div>
      </div>
      <div class="md:col-span-2">
        <label class="block text-sm mb-1">Legal Name</label>
        {{ form.legal_name }}
        <div class="text-rose-600 text-xs">{{ form.legal_name.errors }}</div>
      </div>
      <div>
        <label class="block text-sm mb-1">Phone</label>
        {{ form.phone }}
        <div class="text-rose-600 text-xs">{{ form.phone.errors }}</div>
      </div>
      <div>
        <label class="block text-sm mb-1">Email</label>
        {{ form.email }}
        <div class="text-rose-600 text-xs">{{ form.email.errors }}</div>
      </div>
      <div class="md:col-span-2">
        <label class="block text-sm mb-1">Address</label>
        {{ form.address }}
        <div class="text-rose-600 text-xs">{{ form.address.errors }}</div>
      </div>
      <div>
        <label class="block text-sm mb-1">GST / Sales Tax Reg No.</label>
        {{ form.gst_number }}
        <div class="text-rose-600 text-xs">{{ form.gst_number.errors }}</div>
      </div>
      <div>
        <label class="block text-sm mb-1">Opening Balance</label>
        {{ form.opening_balance }}
        <div class="text-rose-600 text-xs">
          {{ form.opening_balance.errors }}
        </div>
      </div>
      <div>
        <label class="block text-sm mb-1">Opening Balance Type</label>
        <div class="flex gap-6 mt-2">
          {% for choice in form.opening_balance_side %}
            <label class="inline-flex items-center gap-2 cursor-pointer">
              {{ choice.tag }}
              <span class="text-sm">{{ choice.choice_label }}</span>
            </label>
          {% endfor %}
        </div>
        <div class="text-rose-600 text-xs">
          {{ form.opening_balance_side.errors }}
        </div>
        <div class="text-xs text-slate-500 mt-1">
          <strong>Dr (Debit):</strong> They owe us money | 
          <strong>Cr (Credit):</strong> We owe them money
        </div>
      </div>
      <div>
        <label class="block text-sm mb-1">Opening Balance Date</label>
        {{ form.opening_balance_date }}
        <div class="text-rose-600 text-xs">
          {{ form.opening_balance_date.errors }}
        </div>
        <div class="text-xs text-slate-500 mt-1">
          Date when the opening balance was set (optional, defaults to party creation date)
        </div>
      </div>
    </div>
    <div class="md:col-span-2">
      <label class="inline-flex items-center gap-2">
        {{ form.is_active }} <span>Active</span>
      </label>
      <div class="text-rose-600 text-xs">{{ form.is_active.errors }}</div>
    </div>
    </div>

    <div class="flex items-center justify-end gap-2">
      <a
        href="{% url 'customers_list' %}"
        class="rounded-lg px-3 py-2 bg-slate-100 hover:bg-slate-200"
        >Cancel</a
      >
      <button
        class="rounded-lg px-3 py-2 bg-emerald-600 text-white hover:bg-emerald-500"
      >
        {% if object and object.pk %}Save Changes{% else %}Create{% endif %}
      </button>
    </div>
  </form>
</div>
{% endblock %}
